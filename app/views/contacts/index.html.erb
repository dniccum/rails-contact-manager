<% content_for :pageTitle do %>Contacts <% end %>

<% content_for :body do %>
<div class="container">
    <div class="row">
        <div class="col l12 m12 s12">
            <h1 class="heading white-text" style="font-weight: 200;">All Contacts</h1>
            <div class="row">
                <div class="col s12">
                    <div class="card-panel white">
                        <table>
                            <thead>
                                <tr>
                                    <th data-field="first_name">First Name</th>
                                    <th data-field="last_name">Last Name</th>
                                    <th data-field="company">Company</th>
                                    <th style="text-align:center"><i class="material-icons">settings_applications</i></th>
                                </tr>
                            </thead>
                            <tbody>
                                <% @contacts.each do |contact| %>
                                    <tr>
                                        <td><%= contact.first_name %></td>
                                        <td><%= contact.last_name %></td>
                                        <td><%= contact.company %></td>
                                        <td style="text-align:center">
                                            <a class='dropdown-button btn' href='#' data-activates='dropdown<%= contact.id %>' data-hover="false">Actions</a>
                                            <ul id='dropdown<%= contact.id %>' class='dropdown-content'>
                                                <li><%= link_to("Edit", {action: "edit", id: contact.id}, :class => 'white-text amber') %></li>
                                                <li><%= link_to("Delete", '#', :class => 'white-text red delete-modal-trigger', :data => {:id => contact.id, :name => "#{contact.first_name} #{contact.last_name}"}) %></li>
                                            </ul>
                                        </td>
                                    </tr>
                                <% end %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- delete contact modal -->
<div id="delete-modal" class="modal">
    <div class="modal-content">
        <h4>Delete Contact</h4>
        <p>Are you sure that you want to delete this contact: <strong><span class="name"></span></strong></p>
    </div>
    <%= form_tag(:action => 'destroy') do %>
        <%= hidden_field_tag(:id, nil, id: 'contact-to-delete') %>
        <div class="modal-footer">
            <button type="submit" class="modal-action waves-effect waves-light btn red">Yes, Delete It</button>
            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
        </div>
    <% end %>
</div>
<% end %>

<%= render template: "layouts/application" %>
